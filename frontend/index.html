<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediction Market DApp</title>

    <!-- External CSS -->
    <link rel="stylesheet" href="css/styles.css?v=2">

    <!-- Ethers.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>ðŸ”® Prediction Market</h1>
            <p>Decentralized prediction markets on Ethereum</p>
            <div class="wallet-info">
                <div>
                    <span id="walletAddress">Not Connected</span>
                    <span id="walletBalance"></span>
                </div>
                <button class="btn" onclick="connectWallet()" id="connectBtn">Connect Wallet</button>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('markets')">Browse Markets</button>
            <button class="tab" onclick="switchTab('create')">Create Market</button>
            <button class="tab" onclick="switchTab('my-bets')">My Bets</button>
        </div>

        <!-- Status Messages -->
        <div id="error-message" class="error" style="display: none;"></div>
        <div id="success-message" class="success" style="display: none;"></div>

        <!-- Browse Markets Tab -->
        <div id="markets-tab" class="tab-content active">
            <div class="card">
                <h2>Active Markets</h2>
                <div id="activeMarkets" class="loading">Loading active markets...</div>
            </div>
            <div class="card">
                <h2>Resolved Markets</h2>
                <div id="resolvedMarkets" class="loading">Loading resolved markets...</div>
            </div>
        </div>

        <!-- Create Market Tab -->
        <div id="create-tab" class="tab-content">
            <div class="card">
                <h2>Create New Prediction Market</h2>
                <form onsubmit="createMarket(event)">
                    <div class="form-group">
                        <label for="description">Market Description</label>
                        <textarea id="description" rows="3" placeholder="What event do you want people to predict?" required></textarea>
                    </div>

                    <div class="form-group">
                        <label>Possible Outcomes</label>
                        <div class="outcomes-container" id="outcomesContainer">
                            <div class="outcome-input">
                                <input type="text" placeholder="Outcome 1 (e.g., Yes)" required>
                                <button type="button" class="btn btn-danger btn-small" onclick="removeOutcome(this)">Remove</button>
                            </div>
                            <div class="outcome-input">
                                <input type="text" placeholder="Outcome 2 (e.g., No)" required>
                                <button type="button" class="btn btn-danger btn-small" onclick="removeOutcome(this)">Remove</button>
                            </div>
                        </div>
                        <button type="button" class="btn btn-small" onclick="addOutcome()">Add Outcome</button>
                    </div>

                    <div class="form-group">
                        <label for="resolutionTime">Resolution Date & Time</label>
                        <input type="datetime-local" id="resolutionTime" required>
                    </div>

                    <div class="form-group">
                        <label for="arbitrators">Arbitrator Addresses (comma-separated)</label>
                        <textarea id="arbitrators" rows="3" placeholder="0x123..., 0x456..., 0x789..." required></textarea>
                        <small>Minimum 3 arbitrators, maximum 21. Separate addresses with commas. These trusted parties will vote to resolve the market (requires super-majority consensus).</small>
                    </div>

                    <div class="form-group">
                        <label for="creationFee">Creation Fee (ETH)</label>
                        <input type="number" id="creationFee" step="0.001" min="0.001" value="0.001" required>
                        <small>Minimum 0.001 ETH required to create a market</small>
                    </div>

                    <button type="submit" class="btn" style="width: 100%;">Create Market</button>
                </form>
            </div>
        </div>

        <!-- My Bets Tab -->
        <div id="my-bets-tab" class="tab-content">
            <div class="card">
                <h2>My Bets</h2>
                <div id="myBets" class="loading">Loading your bets...</div>
            </div>
        </div>
    </div>

    <!-- External JavaScript -->
    <script src="js/app.js?v=3"></script>
</body>
</html>
